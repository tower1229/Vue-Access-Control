{"version":3,"sources":["webpack:///./src/views/accounts.vue?510d","webpack:///./src/api/account.js","webpack:///src/views/accounts.vue","webpack:///./src/views/accounts.vue?be77","webpack:///./src/views/accounts.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","account","request","attrs","on","fetchData","_v","remove","$_auth","canReset","_e","requestNotAllowed","staticStyle","list","scopedSlots","_u","key","fn","scope","_l","row","role","id","_s","edit","staticRenderFns","preUrlPath","p","r","params","instance","get","delete","put","notAllowed","data","mixins","myMixin","loading","methods","vm","res","content","created","component"],"mappings":"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","file":"js/chunk-2d21ab96.11152f03.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{staticClass:\"operation\"},[_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.request]),expression:\"[account.request]\"}],attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.fetchData}},[_vm._v(\"查询\")]),_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.remove]),expression:\"[account.remove]\"}],attrs:{\"size\":\"small\",\"type\":\"danger\"}},[_vm._v(\"删除\")]),(_vm.$_auth([_vm.account.request]) && _vm.canReset)?_c('el-button',{attrs:{\"size\":\"small\"}},[_vm._v(\"重置\")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.requestNotAllowed}},[_vm._v(\"尝试发起越权请求\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"账号\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.roles),function(role){return _c('el-tag',{key:role.id,staticStyle:{\"margin\":\"0 .5em .5em 0\"},attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(role.name))])})}}])}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"width\":\"80\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.suspended)?[_c('span',{staticStyle:{\"color\":\"#ff4949\"}},[_vm._v(\"已禁用\")])]:[_c('span',{staticStyle:{\"color\":\"#13ce66\"}},[_vm._v(\"已启用\")])]]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"350\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.edit]),expression:\"[account.edit]\"}],attrs:{\"size\":\"mini\",\"type\":\"info\"}},[_vm._v(\"编辑\")]),_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.edit]),expression:\"[account.edit]\"}],attrs:{\"size\":\"mini\",\"type\":\"success\"}},[_vm._v(\"分配角色\")]),_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.edit]),expression:\"[account.edit]\"}],attrs:{\"size\":\"mini\",\"type\":\"warning\"}},[_vm._v(\"重置密码\")]),_c('el-button',{directives:[{name:\"auth\",rawName:\"v-auth\",value:([_vm.account.remove]),expression:\"[account.remove]\"}],attrs:{\"size\":\"mini\",\"type\":\"danger\"}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import instance from './index';\r\nconst preUrlPath = '';\r\n//获取账户列表\r\nconst request = {\r\n  p: ['get,/accounts'],\r\n  r: params => {\r\n    return instance.get(`${preUrlPath}/accounts`, {params})\r\n  }\r\n}\r\n//删除账户\r\nconst remove = {\r\n  p: ['delete,/account/**'],\r\n  r: params => {\r\n    return instance.delete(`${preUrlPath}/account/${params.id}`)\r\n  }\r\n};\r\n\r\n//修改账户\r\nconst edit = {\r\n  p: ['put,/account/**'],\r\n  r: params => {\r\n    return instance.put(`${preUrlPath}/account/${params.id}`, params)\r\n  }\r\n};\r\n//越权请求\r\nconst notAllowed = {\r\n  p: ['get,/roles/notAllowed'],\r\n  r: params => {\r\n    return instance.get(`${preUrlPath}/roles/notAllowed`, {params})\r\n  }\r\n}\r\n\r\nexport {\r\n  request,\r\n  remove,\r\n  edit,\r\n  notAllowed\r\n}\r\n","<style scoped>\r\n\r\n</style>\r\n\r\n<template>\r\n  <div v-loading=\"loading\">\r\n    <!-- 操作 -->\r\n    <div class=\"operation\">\r\n      <el-button size=\"small\" type=\"primary\" v-auth=\"[account.request]\" @click=\"fetchData\">查询</el-button>\r\n      <el-button size=\"small\" type=\"danger\" v-auth=\"[account.remove]\">删除</el-button>\r\n      <el-button size=\"small\" v-if=\"$_auth([account.request]) && canReset\">重置</el-button>\r\n      <el-button size=\"small\" type=\"info\" @click=\"requestNotAllowed\">尝试发起越权请求</el-button>\r\n    </div>\r\n    <!-- table start  -->\r\n    <el-table :data=\"list\" border style=\"width: 100%\">\r\n      <el-table-column prop=\"name\" label=\"账号\" width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column label=\"角色\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag type=\"success\" style=\"margin:0 .5em .5em 0\" v-for=\"role in scope.row.roles\" :key=\"role.id\">{{role.name}}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\" width=\"80\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.suspended\">\r\n            <span style=\"color:#ff4949\">已禁用</span>\r\n          </template>\r\n          <template v-else>\r\n            <span style=\"color:#13ce66\">已启用</span>\r\n          </template>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"350\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"info\" v-auth=\"[account.edit]\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"success\" v-auth=\"[account.edit]\">分配角色</el-button>\r\n          <el-button size=\"mini\" type=\"warning\" v-auth=\"[account.edit]\">重置密码</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" v-auth=\"[account.remove]\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- table end  -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as account from '../api/account';\r\n\r\nlet myMixin = {\r\n  data: function() {\r\n    return { account }\r\n  }\r\n}\r\nexport default {\r\n  mixins: [myMixin],\r\n  data() {\r\n    return {\r\n      canReset: false,\r\n      list: [],\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      let vm = this;\r\n      vm.loading = true;\r\n      account.request.r().then((res) => {\r\n        vm.list = res.data.content;\r\n        vm.loading = false;\r\n      }).catch(() => {\r\n        vm.loading = false\r\n      });\r\n    },\r\n    requestNotAllowed: function(){\r\n      account.notAllowed.r();\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accounts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./accounts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./accounts.vue?vue&type=template&id=5c09afbf&scoped=true&\"\nimport script from \"./accounts.vue?vue&type=script&lang=js&\"\nexport * from \"./accounts.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c09afbf\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}